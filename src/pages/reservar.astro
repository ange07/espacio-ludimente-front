---
import MainLayout from '../layouts/MainLayout.astro';
import { bookingSteps, bookingTips } from '../data/booking-process';
import { bookingFAQ } from '../data/faq';
import { siteConfig } from '../data/site-config';
---

<MainLayout title="Reservar Sesión - Espacio Ludimente" description="Agenda tu primera sesión de valoración. Psicología infantil y adolescente en Mérida.">
  <section class="booking-page">
    <div class="container">
      <div class="booking-grid">
        
        <!-- Columna Izquierda: Info y FAQ -->
        <div class="booking-info">
          <h1>Reserva tu primera sesión</h1>
          
          <div class="info-card">
            <h2>¿Cómo funciona?</h2>
            <ol class="steps-list">
              {bookingSteps.map((step) => (
                <li>
                  <strong>{step.title}:</strong>
                  <p>{step.description}</p>
                </li>
              ))}
            </ol>
            {bookingTips.map((tip) => (
              <p class="note">
                {tip.icon} <strong>{tip.highlight}</strong> {tip.text.replace(tip.highlight + ':', '')}
              </p>
            ))}
          </div>

          <div class="faq-section">
            <h3>Preguntas Frecuentes</h3>

            {bookingFAQ.map((faq) => (
              <details class="faq-item">
                <summary>{faq.question}</summary>
                <p>{faq.answer}</p>
              </details>
            ))}
          </div>
        </div>

        <!-- Columna Derecha: Calendly -->
        <div class="calendly-wrapper">
          <!-- Calendly inline widget begin -->
          <div class="calendly-inline-widget" data-url={siteConfig.calendlyUrl} style="min-width:320px;height:700px;"></div>
          <script is:inline type="text/javascript" src="https://assets.calendly.com/assets/external/widget.js" async></script>
          <!-- Calendly inline widget end -->
        </div>

      </div>
    </div>
  </section>
</MainLayout>

<style>
  .booking-page {
    padding: var(--spacing-xl) 0;
  }

  .booking-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--spacing-xl);
  }

  .booking-info h1 {
    margin-bottom: var(--spacing-lg);
  }

  .info-card {
    background-color: var(--color-surface);
    padding: var(--spacing-lg);
    border-radius: var(--radius-lg);
    margin-bottom: var(--spacing-lg);
  }

  .steps-list {
    padding-left: 20px;
    margin: var(--spacing-md) 0;
  }

  .steps-list li {
    margin-bottom: var(--spacing-sm);
  }

  .steps-list strong {
    color: var(--color-primary);
  }

  .note {
    font-size: 0.9rem;
    background-color: white;
    padding: var(--spacing-sm);
    border-radius: var(--radius-sm);
    border-left: 4px solid var(--color-accent);
  }

  .faq-section h3 {
    margin-bottom: var(--spacing-md);
  }

  .faq-item {
    border-bottom: 1px solid var(--color-outline);
    padding: var(--spacing-sm) 0;
  }

  .faq-item summary {
    font-weight: 600;
    cursor: pointer;
    list-style: none;
    position: relative;
    padding-right: 24px;
  }

  .faq-item summary::after {
    content: '+';
    position: absolute;
    right: 0;
    color: var(--color-primary);
    font-weight: bold;
  }

  .faq-item[open] summary::after {
    content: '-';
  }

  .faq-item p {
    margin-top: var(--spacing-sm);
    color: var(--color-gray-600);
    font-size: 0.95rem;
  }

  .calendly-wrapper {
    background: white;
    border-radius: var(--radius-lg);
    overflow: hidden;
    box-shadow: var(--shadow-md);
    min-height: 700px;
  }

  @media (max-width: 768px) {
    .booking-grid {
      grid-template-columns: 1fr;
    }
  }
</style>
